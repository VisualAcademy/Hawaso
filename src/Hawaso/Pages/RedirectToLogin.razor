@inject NavigationManager NavigationManager
@using Azunt.Utilities.Navigation

@code {
    [Parameter]
    public string? ReturnUrl { get; set; }

    protected override void OnInitialized()
    {
        var safeReturnUrl = ReturnUrlUtility.Normalize(
            ReturnUrl,
            new Uri(NavigationManager.BaseUri),
            ReturnUrlUtility.DefaultPath);

        var encoded = Uri.EscapeDataString(safeReturnUrl);

        NavigationManager.NavigateTo(
            $"Identity/Account/Login?returnUrl={encoded}",
            forceLoad: true);
    }
}
